# 第四章：变量详解

## 一、变量是什么？—— 程序中的“数据容器”

在编程中，变量就像一个**贴了标签的“数据盒子”**：它有一个唯一的名字（标签），有固定的“容量”（能存放的数据类型），里面可以存放具体的数据，并且盒子里的数据可以随时更换。

比如生活中“书包里的笔记本”：笔记本有名字（“数学笔记本”），有固定用途（记录数学笔记），里面的内容（笔记）可以随时增减修改。变量也是如此——我们用它存放程序运行中需要用到的数据（如数字、文字），并能根据需求随时读取或修改这些数据。

为什么需要变量？没有变量时，程序中的数据都是“硬编码”的（比如`cout << 10 + 20 << endl;`），修改数据必须改代码；有了变量，只需修改变量中的值，代码逻辑可以完全不变，极大提升了程序的灵活性和复用性。

## 二、变量的定义：给“盒子”贴标签、定规格

在C++中使用变量前，必须先**定义变量**——也就是明确“盒子”的规格（数据类型）和标签（变量名）。定义变量的基本语法是：

**数据类型 变量名;**

也可以在定义时直接给变量赋值（初始化）：

**数据类型 变量名 = 初始值;**

示例：

```cpp
int age;          // 定义一个int类型变量，名字叫age，暂未赋值
double score = 92.5;  // 定义double类型变量score，初始值设为92.5
string name = "小明";  // 定义string类型变量name，初始值设为"小明"
```

## 三、C++常用变量类型：不同“盒子”装不同数据

C++提供了多种数据类型，用于存放不同类型的数据。初学者需先掌握以下7种常用类型：

### 3.1 整数类型：int

- **用途**：存放没有小数部分的整数，如年龄、数量、序号等。
- **取值范围**：通常为-2147483648 ~ 2147483647（约±20亿），具体取决于编译器。
- **示例**：`int student_count = 45;`（存放学生数量）、`int temperature = -5;`（存放温度）

### 3.2 长整型：long long

- **用途**：存放超出int取值范围的大整数，如人口数量、大额数值等。
- **取值范围**：通常为-9223372036854775808 ~ 9223372036854775807（约±90亿亿），远大于int。
- **示例**：`long long population = 1400000000;`（存放人口数量）、`long long galaxy_stars = 100000000000LL;`（存放星系恒星数量，加LL后缀表示long long类型）

### 3.3 单精度浮点类型：float

- **用途**：存放有小数部分的数值，与double类似，但精度较低。
- **特点**：精度约6-7位有效数字，占用内存比double小（通常4字节，double为8字节），适用于对精度要求不高的场景。
- **示例**：`float pi = 3.14f;`（存放圆周率，注意加f后缀表示float类型，否则默认是double）、`float distance = 125.5f;`（存放距离）

### 3.4 双精度浮点类型：double

- **用途**：存放有小数部分的数值，如身高、体重、成绩、金额等。
- **特点**：精度较高（约15-17位有效数字），满足大多数小数场景需求。
- **示例**：`double height = 1.75;`（存放身高，单位米）、`double price = 39.9;`（存放商品价格）

### 3.5 字符类型：char

- **用途**：存放单个字符，如字母、数字、符号等，需用单引号`' '`括起来。
- **本质**：在计算机中，char类型实际存储的是字符对应的ASCII码值（整数）。
- **示例**：`char gender = '男';`（存放性别）、`char grade = 'A';`（存放等级）、`char symbol = '+';`（存放运算符）

### 3.6 字符串类型：string

- **用途**：存放多个字符组成的字符串（文字），需用双引号`" "`括起来。
- **注意**：string是C++标准库提供的类型，使用时需确保包含`#include <iostream>`（部分环境需额外包含`#include <string>`）。
- **示例**：`string school = "阳光小学";`（存放学校名称）、`string message = "Hello C++";`（存放问候语）

### 3.7 布尔类型：bool

- **用途**：存放“真”或“假”两种状态，用于条件判断（如“是否及格”“开关是否打开”）。
- **取值**：仅两个可能值——`true`（真，对应整数1）和`false`（假，对应整数0）。
- **示例**：`bool is_pass = true;`（表示考试及格）、`bool is_light_on = false;`（表示灯未打开）

## 四、变量命名规则：给“盒子”起合法的名字

变量名不能随便起，必须遵守C++的命名规则，否则编译器会报错。核心规则如下：

- **组成合法**：只能由字母（A-Z, a-z）、数字（0-9）和下划线（_）组成，不能包含空格、标点符号等。
- **开头限制**：不能以数字开头。比如`age123`合法，`123age`非法。
- **禁用关键字**：不能使用C++的“关键字”（有特殊含义的词），如`int`、`double`、`main`、`cout`等。
- **区分大小写**：C++是大小写敏感的语言，`Age`和`age`是两个不同的变量。

**命名建议**：尽量“见名知意”，用能体现变量用途的名字，比如用`user_name`表示用户名，`total_score`表示总分，避免使用`a`、`b`这类模糊的名字，提高代码可读性。

## 五、变量的使用：存数据、取数据、改数据

定义变量后，就可以对它进行三种基本操作：赋值、读取、修改。

### 5.1 赋值与修改

用赋值运算符`=`给变量赋值（第一次赋值叫初始化，后续赋值叫修改）。注意：赋值时“=”右边的值必须和变量类型匹配。

```cpp
#include <iostream>
using namespace std;

int main()
{
    int apple_count;
    apple_count = 10;  // 第一次赋值（初始化）：盒子里装10个苹果
    cout << "初始苹果数量：" << apple_count << endl;
    
    apple_count = 15;  // 修改值：盒子里的苹果变成15个
    cout << "修改后苹果数量：" << apple_count << endl;
    return 0;
}
```

运行输出：

### 5.2 读取与运算

可以直接使用变量名读取其中的值，也可以用变量进行数学运算、字符串拼接等操作。

```cpp
#include <iostream>
using namespace std;

int main()
{
    // 数字变量运算
    double a = 3.5, b = 2.1;
    double sum = a + b;  // 用变量a和b计算和，存入sum
    cout << a << " + " << b << " = " << sum << endl;
    
    // 字符串变量拼接
    string first_name = "张";
    string last_name = "三";
    string full_name = last_name + first_name;  // 字符串拼接
    cout << "全名：" << full_name << endl;
    return 0;
}
```

运行输出：

### 5.3 变量的作用域（入门级）

变量的“作用域”指的是变量能被使用的范围。初学者最常见的是“局部变量”——在函数内部（如`main()`里）定义的变量，只能在该函数内部使用，出了函数就无效了。

```cpp
#include <iostream>
using namespace std;

int main()
{
    int x = 5;  // 局部变量x，作用域是main()函数内部
    cout << x << endl;  // 合法：在作用域内
    return 0;
}
// cout << x << endl;  // 非法：x的作用域已结束，无法访问
```

## 六、常见变量使用错误及规避

- **未定义先使用**：直接写`cout << score << endl;`而没有先定义`score`，编译器会报错“未声明的标识符”。规避：使用前必须先定义变量。
- **类型不匹配赋值**：比如`int age = 18.5;`（把小数赋给int变量），编译器会自动截断小数部分，导致数据丢失。规避：赋值时确保值的类型与变量类型一致。
- **变量名拼写错误**：定义`student_name`，使用时写成`studentname`，编译器会认为是新变量。规避：命名时尽量简洁易记，使用时仔细检查拼写。
- **未初始化使用**：定义`int num;`后直接`cout << num << endl;`，变量会是一个随机的“垃圾值”。规避：定义变量时尽量初始化（赋值初始值）。

## 七、实战练习：变量综合应用

编写一个程序，完成以下功能：

1. 定义string变量存放用户姓名，int变量存放年龄，double变量存放身高。
2. 
3. 计算“5年后的年龄”，并输出用户信息：“姓名：XX，当前年龄：XX，5年后年龄：XX，身高：XX米”。

参考代码：

```cpp
#include <iostream>
using namespace std;

int main()
{
    string name;
    int age;
    double height;
    
    cout << "请输入你的姓名：";
    cin >> name;
    
    cout << "请输入你的年龄：";
    cin >> age;
    
    cout << "请输入你的身高（米）：";
    cin >> height;
    
    int age_after_5 = age + 5;
    cout << "姓名：" << name << endl;
    cout << "当前年龄：" << age << endl;
    cout << "5年后年龄：" << age_after_5 << endl;
    cout << "身高：" << height << "米" << endl;
    return 0;
}
```