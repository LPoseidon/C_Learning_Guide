# 第四章：条件分支——让程序学会“做选择”

## 4.1 为什么需要条件分支？

在前几章的学习中，我们编写的程序都是“直线执行”的——代码从main函数开始，从上到下依次运行，没有任何“选择”。但现实中的场景往往需要根据不同情况做出不同处理：比如网购时“满100减20，不满则原价”，游戏里“血量低于30%显示警告，否则正常”。

生活中处处充满选择：早上起床看天气，下雨就带伞，晴天就戴帽子；考试结束看分数，90分以上买新玩具，60分以上只给鼓励，不及格就得加把劲复习。程序也一样，想要让它“聪明”起来，就得教会它根据不同情况做不同的事——这就是**条件分支语句**的作用。本章我们就用生活里的小故事，解锁程序做选择的秘密武器。



## 4.2 基础if语句：满足条件才执行

先从最基础的**if语句**开始，它的逻辑就像“如果满足某个条件，就做一件事”。比如妈妈常说：“如果作业写完了，就可以看半小时动画片。”这里“作业写完”是条件，“看动画片”是执行的操作。

在C++里，if语句的语法长这样：

```cpp
if (条件) {
    // 条件成立时执行的代码
}
```

我们来编个“判断是否能看动画片”的程序吧：

```cpp
#include <iostream>
using namespace std;

int main() {
    bool isHomeworkDone = true; // true表示作业写完了，false表示没写完
    
    if (isHomeworkDone) {
        cout << "可以看半小时动画片啦！" << endl;
    }
    
    return 0;
}
```

代码解释：我们用`bool`类型的变量`isHomeworkDone`表示“作业是否写完”，当它的值是`true`（条件成立）时，程序就会执行大括号里的内容，输出“可以看半小时动画片啦！”。如果把`isHomeworkDone`改成`false`，程序就会跳过if里的代码，什么都不输出。

这里的“条件表达式”必须是一个布尔值（`true`或`false`）。C++中，比较运算、逻辑运算的结果都是布尔值，最常用的是**比较运算符**：

| 运算符 | 含义                   | 示例     | 结果（假设a=5，b=3） |
| ------ | ---------------------- | -------- | -------------------- |
| `>`    | 大于                   | `a > b`  | `true`               |
| `<`    | 小于                   | `a < b`  | `false`              |
| `>=`   | 大于等于               | `a >= 5` | `true`               |
| `<=`   | 小于等于               | `b <= 2` | `false`              |
| `==`   | 等于（注意是两个等号） | `a == 5` | `true`               |
| `!=`   | 不等于                 | `a != b` | `true`               |

**注意**：`==`是“判断等于”，而`=`是“赋值”，两者不能混淆！如果误写为`if (a = 3)`，程序会把3赋值给a，然后将a的值（非0）视为`true`，导致逻辑错误。

## 4.3 if-else语句：“如果就，否则就”

但生活里的选择往往不是“做或不做”，而是“二选一”。比如爸爸说：“如果考试考了100分，就买乐高；否则就买练习册。”这种“如果A就B，否则就C”的逻辑，就要用到**if-else语句**。

语法格式如下：

```cpp
if (条件) {
    // 条件成立时执行的代码
} else {
    // 条件不成立时执行的代码
}
```

我们把“考试奖励”写成程序：

```cpp
#include <iostream>
using namespace std;

int main() {
    int score = 95; // 考试分数
    
    if (score == 100) {
        cout << "奖励一套乐高！" << endl;
    } else {
        cout << "奖励一本练习册。" << endl;
    }
    
    return 0;
}
```

运行这段代码，因为`score`是95不是100，所以会执行else里的内容，输出“奖励一本练习册。”。如果把`score`改成100，就会输出“奖励一套乐高！”。这就像程序有了“两面性”，能根据条件走不同的路。

## 4.4 else-if语句：多条件的“选择题”

有时候选择不止两个，比如商场促销：“消费满500元打8折，满300元打9折，满100元打9.5折，不满100元不打折。”这种多个条件的情况，用`else-if`语句就最合适了，它能让程序“逐个判断条件，直到找到成立的那个”。

语法格式是这样的：

```cpp
if (条件1) {
    // 条件1成立执行
} else if (条件2) {
    // 条件1不成立，条件2成立执行
} else if (条件3) {
    // 条件1、2不成立，条件3成立执行
} else {
    // 所有条件都不成立执行
}
```

我们来实现“商场折扣计算”：

```cpp
#include <iostream>
using namespace std;

int main() {
    double consumption = 450; // 消费金额（元）
    double discount; // 折扣率
    
    if (consumption >= 500) {
        discount = 0.8;
    } else if (consumption >= 300) {
        discount = 0.9;
    } else if (consumption >= 100) {
        discount = 0.95;
    } else {
        discount = 1.0; // 不打折
    }
    
    double finalPrice = consumption * discount;
    cout << "最终应付金额：" << finalPrice << "元" << endl;
    
    return 0;
}
```

代码里消费450元，满足“满300元”的条件，折扣率是0.9，最终价格就是450*0.9=405元。这里要注意：`else-if`是“从上到下依次判断”的，所以条件顺序不能乱——如果先写“满100元”，那450元会先满足这个条件，就不会走到“满300元”的判断了。

## 4.5 switch语句：“多选一”的快捷方式

当条件是“某个变量等于固定值”时，比如“选择奶茶甜度：1是全糖，2是七分糖，3是五分糖，4是三分糖，5是无糖”，用`switch`语句会比`else-if`更简洁清晰，它就像一个“选项菜单”，直接根据变量的值跳转到对应的选项。

基本语法：

```cpp
switch (变量) {
    case 值1:
        // 变量等于值1时执行
        break; // 跳出switch语句
    case 值2:
        // 变量等于值2时执行
        break;
    ...
    default:
        // 变量不等于任何case值时执行
        break;
}
```

用“选奶茶甜度”写个例子：

```cpp
#include <iostream>
using namespace std;

int main() {
    int sugarLevel;
    cout << "请选择奶茶甜度（1-全糖，2-七分糖，3-五分糖，4-三分糖，5-无糖）：";
    cin >> sugarLevel;
    
    switch (sugarLevel) {
        case 1:
            cout << "您选择的是全糖奶茶，甜甜蜜蜜！" << endl;
            break;
        case 2:
            cout << "您选择的是七分糖奶茶，甜而不腻！" << endl;
            break;
        case 3:
            cout << "您选择的是五分糖奶茶，酸甜适中！" << endl;
            break;
        case 4:
            cout << "您选择的是三分糖奶茶，清新微甜！" << endl;
            break;
        case 5:
            cout << "您选择的是无糖奶茶，健康无负担！" << endl;
            break;
        default:
            cout << "没有这个甜度选项哦，请重新选择！" << endl;
            break;
    }
    
    return 0;
}
```

这里的`break`非常重要，它的作用是“执行完当前case后跳出switch”，如果没有`break`，程序会继续往下执行下一个case的内容（比如选1时，会把后面所有甜度的提示都输出），一定要记得加哦！

## 4.6 本章小结：让程序“会思考”的第一步

条件分支语句就像给程序装上了“决策大脑”：if语句解决“单一条件”，if-else解决“二选一”，else-if解决“多条件排序”，switch解决“固定值多选一”。它们的核心都是“根据条件判断，执行不同代码”。

接下来不妨试试自己写个程序吧，比如“判断一个数是正数、负数还是零”，或者“根据星期几输出对应的课程表”。多动手练习，你会发现程序越来越“懂你”，能帮你处理各种不同的情况啦！