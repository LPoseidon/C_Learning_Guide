# 第三章：如何让程序“读取用户输入”

## 3.1 从“单向输出”到“双向互动”

在前两章的学习中，我们编写的程序都属于“单向输出”——无论是打印“Hello World”，还是计算固定数字的加减乘除，程序的行为都是我们提前在代码里设定好的，用户只能被动查看结果。但真正实用的程序往往需要“双向互动”，比如计算器需要用户输入要计算的数字，查询系统需要用户输入关键词。

要实现这种互动，核心就是让程序能“读取用户从键盘输入的内容”。在C++中，完成这一功能的工具就是**cin**，它和我们之前用的输出工具`cout`相辅相成，共同搭建起程序与用户沟通的桥梁。这一章，我们就来掌握`cin`的使用方法，让程序真正“听懂”用户的指令。

## 3.2 初识cin：读取输入的基本用法

`cin`是C++标准输入流对象，专门用于从标准输入设备（也就是键盘）读取数据。它的使用语法和`cout`相似，但方向相反——`cout`用`<<`把数据“输出”到屏幕，`cin`用`>>`把键盘输入的数据“输入”到变量中，基本格式如下：

```
cin >> 变量名;
```

使用`cin`前，和`cout`一样需要包含头文件`#include <iostream>`并使用`using namespace std;`。下面我们通过一个简单的例子，看看`cin`是如何工作的。

### 3.2.1 读取整数输入：计算年龄差

假设我们想写一个程序，让用户输入自己的年龄和朋友的年龄，然后计算年龄差。代码可以这样写：

```cpp
#include <iostream>
using namespace std;

int main()
{
    int my_age, friend_age;  // 定义两个int类型变量，存放年龄
    
    // 提示用户输入
    cout << "请输入你的年龄：";
    cin >> my_age;  // 读取用户输入的整数，存入my_age
    
    cout << "请输入你朋友的年龄：";
    cin >> friend_age;  // 读取第二个整数，存入friend_age
    
    // 计算并输出年龄差
    cout << "你们的年龄差是：" << abs(my_age - friend_age) << "岁" << endl;
    return 0;
}
```

运行程序后，屏幕会先显示“请输入你的年龄：”，此时你从键盘输入一个整数（比如20）并按回车键，程序会接着显示“请输入你朋友的年龄：”，再输入另一个整数（比如18），最后会输出“你们的年龄差是：2岁”。这里用到的`abs()`是求绝对值的函数，确保年龄差为正数。

### 3.2.2 读取小数输入：计算面积

如果需要读取带有小数的数据（比如长度、重量），就需要用到`double`类型的变量。比如计算一个长方形的面积，需要用户输入长和宽（可能是小数）：

```cpp
#include <iostream>
using namespace std;

int main()
{
    double length, width, area;
    
    cout << "请输入长方形的长（米）：";
    cin >> length;
    
    cout << "请输入长方形的宽（米）：";
    cin >> width;
    
    area = length * width;  // 计算面积
    cout << "长方形的面积是：" << area << "平方米" << endl;
    return 0;
}
```

运行时输入“3.5”和“2.2”，程序会输出“长方形的面积是：7.7平方米”，完美支持小数计算。

## 3.3 读取字符串输入：与用户打招呼

除了数字，程序也经常需要读取用户输入的文字（比如姓名、地址），这时候就需要用到专门存放字符串的`string`类型变量。

```cpp
#include <iostream>
using namespace std;

int main()
{
    string name;  // 定义string类型变量，存放姓名
    
    cout << "请输入你的名字：";
    cin >> name;  // 读取用户输入的字符串，存入name
    
    cout << "很高兴认识你，" << name << "！" << endl;
    return 0;
}
```

运行程序后输入自己的名字（比如“李华”），程序会输出“很高兴认识你，李华！”。需要注意的是，`string`类型属于C++标准库的一部分，虽然包含`<iostream>`头文件即可使用，但部分早期编译器可能需要额外包含`#include <string>`，如果遇到报错可以尝试添加该头文件。

## 3.4 连续读取输入：简化操作流程

如果需要读取多个数据，不需要重复写多个`cin`语句，可以用`>>`连续分隔变量，一次性读取多个输入。比如让用户同时输入身高和体重：

```cpp
#include <iostream>
using namespace std;

int main()
{
    double height, weight;
    
    cout << "请输入你的身高（米）和体重（千克），用空格分隔：";
    cin >> height >> weight;  // 连续读取两个double类型变量
    
    cout << "身高：" << height << "m，体重：" << weight << "kg" << endl;
    return 0;
}
```

运行时输入“1.78 65.5”（两个数之间用空格、Tab或回车键分隔都可以），程序会正确将1.78存入`height`，65.5存入`weight`。这种方式可以简化用户的输入流程，让操作更高效。

## 3.5 本章小结与预告

本章我们掌握了用`cin`读取不同类型输入的方法：整数用`int`变量，小数用`double`变量，文字用`string`变量，还学会了连续读取多个输入。有了输入功能，程序终于实现了从“单向输出”到“双向互动”的跨越。

